{"version":3,"file":"reports.js","names":["_errors","require","_http","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","asyncGeneratorStep","n","a","c","u","done","Promise","resolve","then","_asyncToGenerator","_next","_throw","Reports","constructor","config","getAllReports","parameters","_this","url","host","queryString","map","key","join","response","get","httpClient","sk","json","err","error","determineError","getReportDetails","id","_this2","getReportFile","fileId","_this3","csv","exports","default"],"sources":["../../../src/api/reports/reports.js"],"sourcesContent":["import { determineError } from '../../services/errors';\r\nimport { get } from '../../services/http';\r\n\r\n/**\r\n * Class dealing with the /reports api endpoint\r\n *\r\n * @export\r\n * @class Reports\r\n */\r\nexport default class Reports {\r\n    constructor(config) {\r\n        this.config = config;\r\n    }\r\n\r\n    /**\r\n     * Returns the list of reports and their details.\r\n     *\r\n     * @memberof Reports\r\n     * @param {Object} parameters Parameters.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getAllReports(parameters) {\r\n        try {\r\n            let url = `${this.config.host}/reports`;\r\n\r\n            if (parameters) {\r\n                const queryString = Object.keys(parameters)\r\n                    .map((key) => `${key}=${parameters[key]}`)\r\n                    .join('&');\r\n                url += `?${queryString}`;\r\n            }\r\n\r\n            const response = await get(\r\n                this.config.httpClient, \r\n                url, \r\n                this.config, \r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use this endpoint to retrieve a specific report using its ID.\r\n     *\r\n     * @memberof Reports\r\n     * @param {string} id The ID of the report to retrieve.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getReportDetails(id) {\r\n        try {\r\n            const response = await get(\r\n                this.config.httpClient,\r\n                `${this.config.host}/reports/${id}`,\r\n                this.config,\r\n                this.config.sk\r\n            );\r\n            return await response.json;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Use this endpoint to retrieve a specific file from a given report using their respective IDs.\r\n     *\r\n     * @memberof Reports\r\n     * @param {string} id The ID of the report that the file belongs to.\r\n     * @param {Object} fileId The ID of the file to retrieve.\r\n     * @return {Promise<Object>} A promise to the Reports response.\r\n     */\r\n    async getReportFile(id, fileId) {\r\n        try {\r\n            const response = await get(\r\n                this.config.httpClient,\r\n                `${this.config.host}/reports/${id}/files/${fileId}`,\r\n                { ...this.config, csv: true },\r\n                this.config.sk\r\n            );\r\n            return await response.csv;\r\n        } catch (err) {\r\n            const error = await determineError(err);\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n"],"mappings":"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","ignoreList":[]}